{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Comunicación Ambulancia-Hospital{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>

<body>
    <header
        style="background-color:#004aad; color:white; padding:15px 20px; display:flex; justify-content:space-between; align-items:center;">
        <div style="display:flex; align-items:center; gap:10px;">
            {% if request.session.cargoUsuario == 'Administrador' %}
            <img src="{% static 'img/logo_admin.png' %}" style="height:40px;">
            <span style="font-weight:bold;">Administrador — {{ request.session.nomUsuario }}</span>
            {% elif request.session.cargoUsuario == 'Paramedico' %}
            <img src="{% static 'img/logo_paramedico.png' %}" style="height:40px;">
            <span style="font-weight:bold;">Paramédico — {{ request.session.nomUsuario }}</span>
            {% elif request.session.cargoUsuario == 'Hospital' %}
            <img src="{% static 'img/logo_hospital.png' %}" style="height:40px;">
            <span style="font-weight:bold;">Hospital — {{ request.session.nomUsuario }}</span>
            {% else %}
            <img src="{% static 'img/logo_default.png' %}" style="height:40px;">
            <span style="font-weight:bold;">Invitado</span>
            {% endif %}
        </div>

        <nav style="display:flex; align-items:center; gap:15px; position:relative;">
            {% if request.session.cargoUsuario == 'Paramedico' %}
            <a href="{% url 'menu_paramedico' %}" style="color:white; text-decoration:none;">Inicio</a>
            {% elif request.session.cargoUsuario == 'Hospital' %}
            <a href="{% url 'menu_hospital' %}" style="color:white; text-decoration:none;">Inicio</a>
            {% elif request.session.cargoUsuario == 'Administrador' %}
            <a href="{% url 'index' %}" style="color:white; text-decoration:none;">Inicio</a>
            {% else %}
            <a href="{% url 'index' %}" style="color:white; text-decoration:none;">Inicio</a>
            {% endif %}

            <button id="menuBtn"
                style="background:none; border:none; color:white; font-size:1.3em; cursor:pointer;">☰</button>

            <div id="menuDropdown"
                style="display:none; position:absolute; right:0; top:50px; background:white; color:black; min-width:200px; border-radius:5px; box-shadow:0 4px 8px rgba(0,0,0,0.3); overflow:hidden; z-index:100;">
                {% if request.session.cargoUsuario == 'Administrador' %}
                <a href="{% url 'crear_usuario' %}"
                    style="display:block; padding:10px; text-decoration:none; color:black;">Crear usuario</a>
                <a href="{% url 'listar_usuarios' %}"
                    style="display:block; padding:10px; text-decoration:none; color:black;">Listar usuarios</a>
                <a href="{% url 'ver_historial' %}"
                    style="display:block; padding:10px; text-decoration:none; color:black;">Ver historial</a>
                {% endif %}

                <a href="{% url 'cerrar_sesion' %}"
                    style="display:block; padding:10px; text-decoration:none; color:black;">Cerrar sesión</a>
            </div>
        </nav>
    </header>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const btn = document.getElementById("menuBtn");
            const menu = document.getElementById("menuDropdown");
            btn.addEventListener("click", () => {
                menu.style.display = menu.style.display === "block" ? "none" : "block";
            });
            document.addEventListener("click", (e) => {
                if (!btn.contains(e.target) && !menu.contains(e.target)) menu.style.display = "none";
            });
        });
    </script>

    <main>
        {% block content %}{% endblock %}
    </main>

    <footer>
        <p>Comunicacion Ambulancia-Hospital — Versión 1.0</p>
    </footer>
</body>

</html>